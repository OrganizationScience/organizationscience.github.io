<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
<head>
  <meta charset="UTF-8">
  {% seo %}
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  
  <!-- Include DataTables CSS -->
  <link rel="stylesheet" href="{{ '/assets/datatables/datatables.min.css' | relative_url }}">

  <style>
    /* Global Styles */
    body {
      margin: 0;
      font-family: 'Open Sans', sans-serif;
    }

    /* Header Section */
    header.page-header {
      text-align: center;
      padding: 20px;
      background-color: #3A7D44;
      color: white;
    }

    /* Navigation Bar */
    .nav-bar {
      width: 100%; /* Full width */
      background-color: transparent; /* Transparent background */
      color: #157878;
      padding: 10px 0;
      border-bottom: 2px solid #157878; /* Bottom border for separation */
      display: flex;
      justify-content: center; /* Center align the content horizontally */
      align-items: center; /* Center align the content vertically */
    }

    .nav-bar ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
      display: flex; /* Horizontal alignment */
      gap: 20px; /* Space between items */
    }

    .nav-bar ul li {
      margin: 0;
    }

    .nav-bar ul li a {
      color: #157878; /* Green text */
      font-weight: bold; /* Bold text */
      text-decoration: none;
    }

    .nav-bar ul li a:hover {
      text-decoration: underline; /* Underline effect on hover */
    }

    /* Content Section */
    .content-container {
      padding: 20px;
    }

    /* Footer Section */
    footer.site-footer {
      margin-top: 20px;
      text-align: center;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .nav-bar ul {
        flex-direction: column; /* Stack items vertically on smaller screens */
        gap: 10px; /* Reduce gap between items */
      }
    }
  </style>
  {% include head-custom.html %}
</head>
<body class="{{ page.class }}">
  <!-- Page Header -->
  <header class="page-header" role="banner">
    <h1 class="project-name">
      <a href="/" style="color: white; text-decoration: none;">Organization Science</a>
    </h1>
    <h2 class="project-tagline">{{ page.description | default: site.description | default: site.github.project_tagline }}</h2>
  </header>

  <!-- Navigation Bar -->
  <div class="nav-bar">
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/topics/misconduct.html">Misconduct</a></li>
      <li><a href="/topics/science_innovation.html">Science Innovation</a></li>
      <li><a href="/topics/other-topic.html">Other Topics</a></li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="content-container">
    <main id="content" class="main-content" role="main">
      {{ content }}
    </main>
  </div>

  <!-- Footer Section -->
  <footer class="site-footer">
    {% if site.github.is_project_page %}
      <span class="site-footer-owner"><a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</span>
    {% endif %}
    <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
  </footer>

  <!-- Include jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Include DataTables JS -->
  <script src="{{ '/assets/datatables/datatables.min.js' | relative_url }}"></script>

  <!-- Initialize DataTables -->
  <script>
      document.addEventListener('DOMContentLoaded', function() {
          const tables = document.querySelectorAll('.display');
          tables.forEach(table => {
              if (!table.dataset.dtInitialized) {
                  $(table).DataTable();
                  table.dataset.dtInitialized = true; // Mark as initialized
              }
          });
      });
  </script>

  <!-- Fetch and Inject Top 5 Rows -->
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    function fetchTop5Rows(url, targetListId) {
      fetch(url)
        .then((response) => response.text())
        .then((html) => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, "text/html");
          const table = doc.querySelector("#misconductTable tbody");
  
          if (!table) {
            console.error(`Table not found in ${url}`);
            return;
          }
  
          const rows = table.querySelectorAll("tr");
          const targetList = document.getElementById(targetListId);
  
          // ** Clear the target list before appending rows **
          targetList.innerHTML = "";
  
          // Inject top 5 rows
          for (let i = 0; i < Math.min(5, rows.length); i++) {
            const cells = rows[i].querySelectorAll("td");
            const category = cells[0].textContent.trim(); // Category
            const title = cells[3].textContent.trim(); // Reference
  
            const listItem = document.createElement("li");
            listItem.innerHTML = `
              <a href="${url}#row-${i + 1}" target="_self" style="text-decoration: none; color: #007acc;">
                <strong>${category}:</strong> ${title}
              </a>
            `;
            targetList.appendChild(listItem);
          }
        })
        .catch((error) => console.error(`Error fetching data from ${url}:`, error));
    }
  
    // Fetch top 5 rows for Misconduct
    fetchTop5Rows("/topics/misconduct.html", "misconduct-top5");
  
    // Fetch top 5 rows for Science Innovation
    fetchTop5Rows("/topics/science_innovation.html", "science_innovation-top5");
  });
  </script>
</body>
</html>
